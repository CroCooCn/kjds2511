-- ============================================
-- 用戶密碼重置 SQL 腳本
-- 用於重置測試用戶的密碼，使其能夠正常登錄
-- ============================================

-- 說明：
-- 1. 密碼使用 DES 加密，使用手機號作為 key
-- 2. 密碼格式：必須以字母開頭，6-18位，只能包含字母、數字和下劃線
-- 3. 以下 SQL 會將用戶密碼重置為 "Test123456"

-- ============================================
-- 方法一：重置為已知密碼（推薦用於測試）
-- ============================================

-- 重置用戶 18292417675 的密碼為 Test123456
-- 注意：需要先計算加密後的密碼值
-- 可以使用 Java 代碼：CrmebUtil.encryptPassword("Test123456", "18292417675")
-- 或者使用下面的 SQL（如果數據庫支持函數）

-- 如果您的數據庫支持，可以使用以下方式（需要先計算加密值）：
-- UPDATE eb_user SET pwd = '計算後的加密值' WHERE phone = '18292417675';

-- ============================================
-- 方法二：使用簡單密碼（需要手動計算加密值）
-- ============================================

-- 建議的測試密碼：
-- 1. Test123456 (推薦)
-- 2. Abc123456
-- 3. User123456

-- 計算加密密碼的方法：
-- 在 Java 中執行：
-- String encrypted = CrmebUtil.encryptPassword("Test123456", "18292417675");
-- System.out.println(encrypted);

-- ============================================
-- 方法三：直接使用驗證碼登錄（無需密碼）
-- ============================================

-- 如果密碼有問題，可以使用驗證碼登錄方式：
-- 1. 發送驗證碼：POST /api/front/sendCode?phone=18292417675
-- 2. 驗證碼登錄：POST /api/front/login/mobile
--    這會自動登錄，無需密碼

-- ============================================
-- 檢查用戶狀態
-- ============================================

-- 檢查用戶是否存在且狀態正常
SELECT uid, account, phone, status, pwd 
FROM eb_user 
WHERE phone = '18292417675';

-- 如果 status = 0，需要啟用用戶：
-- UPDATE eb_user SET status = 1 WHERE phone = '18292417675';

-- ============================================
-- 重置所有測試用戶的密碼（可選）
-- ============================================

-- 注意：以下 SQL 需要先計算加密值，不能直接執行
-- 請使用 Java 代碼計算加密值後再更新

-- 重置 18292417675 的密碼
-- UPDATE eb_user SET pwd = '計算後的加密值' WHERE phone = '18292417675';

-- 重置 18868590679 的密碼
-- UPDATE eb_user SET pwd = '計算後的加密值' WHERE phone = '18868590679';

-- 重置 testuser001 的密碼（如果 account 是手機號格式）
-- UPDATE eb_user SET pwd = '計算後的加密值' WHERE account = 'testuser001';

-- 重置 test001 的密碼（如果 account 是手機號格式）
-- UPDATE eb_user SET pwd = '計算後的加密值' WHERE account = 'test001';

